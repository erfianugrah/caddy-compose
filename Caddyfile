{
	email {$EMAIL}
	acme_dns cloudflare {$CF_API_TOKEN}
	cert_issuer acme
	debug
	grace_period 5s
	log {
		level debug
		output file /var/log/access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
	servers {
		strict_sni_host on
		protocols h1 h2 h3
		trusted_proxies static 173.245.48.0/20 103.21.244.0/22 103.22.200.0/22 103.31.4.0/22 141.101.64.0/18 108.162.192.0/18 190.93.240.0/20 188.114.96.0/20 197.234.240.0/22 198.41.128.0/17 162.158.0.0/15 104.16.0.0/13 104.24.0.0/14 172.64.0.0/13 131.0.72.0/22 2400:cb00::/32 2606:4700::/32 2803:f800::/32 2405:b500::/32 2405:8100::/32 2a06:98c0::/29 2c0f:f248::/32
	}
	dynamic_dns {
		provider cloudflare {$CF_API_TOKEN}
		domains {
			erfianugrah.com @ port servarr fileservarr plex navidrome sonarr radarr bazarr prowlarr grafana-unraid prom-unraid vaultwarden ping kvm file jellyfin synapse synapse-admin rclone change beets element tautulli hedgedoc privatebin photoprism coredns-prom-exporter-sg nodered immich caddy-prometheus
		}
		check_interval 1m
		ip_source upnp
		ip_source simple_http https://icanhazip.com
		ip_source simple_http https://api.ipify.org
		ip_source simple_http https://myip.addr.space
		ip_source simple_http https://ifconfig.me
		ip_source simple_http https://icanhazip.com
		ip_source simple_http https://ident.me
		ip_source simple_http https://bot.whatismyipaddress.com
		ip_source simple_http https://ipecho.net/plain
	}
}

erfianugrah.com, www.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {env.CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	handle {
		reverse_proxy 172.18.0.2:2368 {
			trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
			header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
		}
		route {
			@image path_regexp image ^.*\.(jpe?g|png|gif|web)$
			header @image {
			>Cache-Control "public, max-age=315360001, stale-while-revalidate=31536000"
			>Access-Control-Allow-Origin "*"
			>Access-Control-Max-Age "86400"
			}
			header >Link "<https://erfianugrah.com/manifest.txt>; rel=prefetch"
		}
	}
	handle_path /manifest.txt {
		root * /data/manifest.txt
		file_server
		header >Link "<https://erfianugrah.com/manifest.txt>; rel=prefetch"
	}
	encode zstd gzip
	push
	log {
		level debug
		output file /var/log/erfianugrahcom-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

port.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.33.0.2:9000 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	reverse_proxy 172.33.0.2:8000 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/portainer-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

servarr.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy localhost:90 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/servarr-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

plex.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.8:32400 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/plex-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# hydra.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.19.0.7:5076 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# 	log {
# 		level debug
# 		output file /var/log/hydra-access.log {
# 			roll_size 1gb
# 			roll_keep 5
# 			roll_keep_for 720h
# 		}
# 		format json {
# 			time_format wall
# 		}
# 	}
# }

# nzb.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.19.0.6:7000 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# 	log {
# 		level debug
# 		output file /var/log/nzb-access.log {
# 			roll_size 1gb
# 			roll_keep 5
# 			roll_keep_for 720h
# 		}
# 		format json {
# 			time_format wall
# 		}
# 	}
# }

sonarr.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.3:8989 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/sonarr-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

radarr.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.2:7878 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/radarr-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

bazarr.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.4:6767 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/bazarr-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# nextcloud.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	redir /.well-known/carddav /remote.php/dav 301
# 	redir /.well-known/caldav /remote.php/dav 301
# 	@forbidden {
# 		path /.htaccess
# 		path /data/*
# 		path /config/*
# 		path /db_structure
# 		path /.xml
# 		path /README
# 		path /3rdparty/*
# 		path /lib/*
# 		path /templates/*
# 		path /occ
# 		path /console.php
# 	}
# 	respond @forbidden 404
# 	encode zstd gzip
# 	reverse_proxy 172.21.0.2:80 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

grafana-unraid.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.29.0.2:3000 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/grafana-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

prom-unraid.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.29.0.3:9090 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/prometheus-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

vaultwarden.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		client_auth {
			mode require_and_verify
			trusted_ca_cert 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
			trusted_leaf_cert MIIFqjCCA5ICFBNgmacpJA3FRSqVxTXOlNOft+3IMA0GCSqGSIb3DQEBCwUAMIGBMQswCQYDVQQGEwJTRzESMBAGA1UECAwJU2luZ2Fwb3JlMRIwEAYDVQQHDAlTaW5nYXBvcmUxFTATBgNVBAoMDE9yZ2FuaXphdGlvbjENMAsGA1UECwwERXJmaTEkMCIGA1UEAwwbdmF1bHR3YXJkZW4uZXJmaWFudWdyYWguY29tMB4XDTIzMTAwOTA3NTUzNFoXDTI1MDIyMDA3NTUzNFowgaAxCzAJBgNVBAYTAlNHMRIwEAYDVQQIDAlTaW5nYXBvcmUxEjAQBgNVBAcMCVNpbmdhcG9yZTENMAsGA1UECgwERXJmaTENMAsGA1UECwwERXJmaTEkMCIGA1UEAwwbdmF1bHR3YXJkZW4uZXJmaWFudWdyYWguY29tMSUwIwYJKoZIhvcNAQkBFhZlcmZpLmFudWdyYWhAZ21haWwuY29tMIICIjANBgkqhkiG9w0BAQEFAAOCAg8AMIICCgKCAgEAnIHnG2hmToQ1W3SZn7ywXFyx7UgqXflGfxDwiRgdayzXJDyOI9nNT238EnLFAOi2nUhudvrcO7ZM9adHZATQtN+U3ckP3kfN8FHgAMR7XP89klIZRHmcxzoILxlo1QzQa61KIbztg83ASxyk6HvQyUAXo6gGPRTIVGBi1ouVdo8csBJ3M+yXYD4bY4ee1+6SZvLEgiZsSD9wNCkv0EUDY77VuomxFrtK7/fuNLqD3N8fDvVb86SK+dUoNDv1syWUNsTCMu/rDf2w48Dp55FA01UCZpr7UaUBOmScHDOClngAvvVmntkXqJ6wjVjCJypCJaV8fVPgtEkICEqDQqTkRzmliuAwZ2dmT7mTaPIpX3eV/xJkkFTZNag6DHdJvT4m4xyu1lF7kyI9COz2mmYmx6E8JDsms1YrOlx9vvjwkOgRMRPOspOFngpr+9nKeawbO1UscqAAu1EyDzm1nXP2cr7vqeuOY50JRjCXyyGtJHcO3gy+MYMAZ7oGOEgRlnCXNq3R8yOlu7OUtCQG4MgcqwKsFPZNZeOK8CRuSJbLF6rRdx0dmsoiiMaENotDE3nnlZh+OmMRpJZCo6J1tJSVadBo6+tn/58pkVuF4pjraXI7okEuGc0ZpI6WkEkZBoY1SD8qBLlZFyJGaTT9kqitGNGzgUxBs3Su0kVdFf1Gz9cCAwEAATANBgkqhkiG9w0BAQsFAAOCAgEAOjpPnCjr8UH4JIXt2WbheujOJ0JpzaO5+JvI6Xqk4/5bMwqhLqcSmGQFqUzVhUos+547g4cuBFkNOISBPxEh3e3f06u48Gteaefjc/1sM1f+BnuJMCUifJ2f9DH5Jdglqyc6UmWy58kE1w3jO6TnFcIx90151vM73FPXnTIumh7iRGSscPkgwLVZVcb5z5WSFpDZIe1LAl9DnBLsoPYCwuEF4dItVaZNdxfTFJjyt4ATAXdesvu/j8BojAxiilIIN8vxlSOSkPZ+GSIgbgU0i9OaC800iiif7V+e6YMwiwEw+v5P7HfThGtsQd62BmT4NbPMQQGzPPlhRMvXZzTiDt7xyYobC4s7Omav7RobhvaFBnAxGsipCfFeO2NHTKgt6Pjb8t8x9DCDh7QOYt/TMhOposmC0Tj9g1i7XaI/PqdFzpm9u/6cLPYApjmfvKm57zC/9FtamolDC5pSY12My+1Xt+goOECmO8roJB1FDRgZdydrIZC0szfT57/7J2id6T2ojLLlNZ3MjNVHUA7iK0nB4fjTAXdvvE90o+hp3SiiQjjIqY/h0t0HInaEogXHNHgAty0ifuNb46yd/0thYe2CQ71CAkp81WMv9MrcoA+OXudMzGzDFzMb//ZBB1ZfQCG+I4jLkYEQivq4Dixw1e2+vTy3lyaT6EETSWfsh2M=
		}
	}
	encode zstd gzip
	reverse_proxy /notifications/hub 172.20.0.2:3012 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Real-IP {remote_host}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	reverse_proxy 172.20.0.2:80 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Real-IP {remote_host}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/vaultwarden-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# jackett.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.19.0.9:9117 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# 	log {
# 		level debug
# 		output file /var/log/jackett-access.log {
# 			roll_size 1gb
# 			roll_keep 5
# 			roll_keep_for 720h
# 		}
# 		format json {
# 			time_format wall
# 		}
# 	}
# }

prowlarr.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.10:9696 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/prowlarr-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# readarr.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.19.0.11:8787 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

file.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	@image path_regexp image ^.*\.(jpe?g|png|gif|avif|tiff|web|mkv|mp4|flac|mp3|wav|ogg|aac|mov|flv|avi)$
	header @image {
		defer
		Cache-Control "public, max-age=31536000, stale-while-revalidate=31536000"
		Access-Control-Allow-Origin "*"
		Access-Control-Max-Age "86400"
	}
	encode zstd gzip
	reverse_proxy 172.26.0.2:80 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/file-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

jellyfin.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.15:8096 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/jellyfin-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

qbit.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.27.0.2:8080 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/qbit-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# pastebin.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.30.0.2:8080 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# 	log {
# 		level debug
# 		output file /var/log/pastebin-access.log {
# 			roll_size 1gb
# 			roll_keep 5
# 			roll_keep_for 720h
# 		}
# 		format json {
# 			time_format wall
# 		}
# 	}
# }

# pihole.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.28.0.3:80 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

change.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.31.0.2:5000 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/change-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

rclone.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy /auth 172.32.0.2:53682 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	reverse_proxy 172.32.0.2:5572 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/rclone-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

synapse.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	header /.well-known/matrix/* {
		Content-Type application/json
		Access-Control-Allow-Origin *
	}
	respond /.well-known/matrix/server 200 {
		body `{"m.server": "synapse.erfianugrah.com:443"}`
		close
	}
	respond /.well-known/matrix/client 200 {
		body `{"m.homeserver":{"base_url":"https://synapse.erfianugrah.com"},"m.identity_server":{"base_url":"https://synapse.erfianugrah.com"}}`
		close
	}
	encode zstd gzip
	reverse_proxy 172.34.0.2:8008 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	reverse_proxy /_synapse/metrics 172.34.0.2:9000 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/synapse-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

synapse-admin.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	reverse_proxy 172.34.0.5:80 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/synapse-admin-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

coturn.erfianugrah.com {
	tls {
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	log {
		level debug
		output file /var/log/coturn-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

overseerr.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.13:5055 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/overseerr-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

tautulli.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.14:8181 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/tautulli-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

element.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	@nocache path_regexp nocache \/(config\..*\.json|config.json|i18n|home|sites|index\.html)
	header {
		X-Frame-Options "SAMEORIGIN"
		X-Content-Type-Options "nosniff"
		X-XSS-Protection "1; mode=block"
		Content-Security-Policy "frame-ancestors 'none'"
	}
	header @nocache {
		Cache-Control: no-cache
	}
	encode zstd gzip
	reverse_proxy 172.34.0.6:80 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/element-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

keycloak.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.38.0.2:8080 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/keycloak-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# git.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.40.0.2:3000 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

beets.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.16:8337 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/beets-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

joplin.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		client_auth {
			mode require_and_verify
			trusted_ca_cert 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
			trusted_leaf_cert MIIFkTCCA3kCFBNgmacpJA3FRSqVxTXOlNOft+3JMA0GCSqGSIb3DQEBCwUAMHwxCzAJBgNVBAYTAlNHMRIwEAYDVQQIDAlTaW5nYXBvcmUxEjAQBgNVBAcMCVNpbmdhcG9yZTEVMBMGA1UECgwMT3JnYW5pemF0aW9uMQ0wCwYDVQQLDARFcmZpMR8wHQYDVQQDDBZqb3BsaW4uZXJmaWFudWdyYWguY29tMB4XDTIzMTAxNDA3MTk0N1oXDTI1MDIyNTA3MTk0N1owgY0xCzAJBgNVBAYTAlNHMQswCQYDVQQIDAJTRzELMAkGA1UEBwwCU0cxDTALBgNVBAoMBEVyZmkxDTALBgNVBAsMBEVyZmkxHzAdBgNVBAMMFmpvcGxpbi5lcmZpYW51Z3JhaC5jb20xJTAjBgkqhkiG9w0BCQEWFmVyZmkuYW51Z3JhaEBnbWFpbC5jb20wggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDAXatWIitP6Elxz84Y94Dl7RYAEsO7E4SHWTG+pTV9o6xMTfb+MWxZZJgWLx72KFy5pQX/BTAKe4MB1hMNgwkMP4CawpApyzZXy48QSNzECrn4HxHIxQAOt1NbTjDVTcuaZKG8D+zmpWFlOB8hVytHXTYkustJg8X54EEX9hsfDTsliSQ2Zi/av2nsUG6fqkCeKFY8g0XAEY5GE1ADa6E8iG9OhzLWo0G6mhTGL/BzD0ZOemKv8RD8OglH0Hfaz/EYQ88c99wyLiSmTGkjhQ2dPf3Ck8CS7z2mJCr3tfPpiK1+wdCg3Gq19kKYoloaIwSVdMZFH2apxJPtDHg4IXMJF7BuLIA4T1P4xkdH/3G1YjQJFu8r/C5//OMoI5Ib3alr6APXblWxhJ/mCIMgSY3WXa6OH+LXUfBKxSQs/kR+3SWAjjsNc5R4FavjPGfaiNq7g0l+2EEGG3XJUrVcBWy0E8Xm8saaHw827A5tjOAGcTnlFyceemFhgq8kDBC3n0GY4KI82R0Ynm/9S5adnM9l/1D9O5xca9NlOcCBGO+6iIyEGKyJoGkL3YKghp6PjbZwq9V2B6UiMZaJbEFFDM11P9Kh5yfjsCcdqJjmfuDgN/6K6WNFQegIZeyxda08IMIQhMWhwbxQuSz80hHgzn87MDHxNdUTkDxeRmo6twE6WwIDAQABMA0GCSqGSIb3DQEBCwUAA4ICAQBUp3dYvtatvAtXZo6G5NNvvIpUAk1B+JaLOH4bABroxAsOEsUF+Q4eB7mWj+m6relqKHYvfbXHRjGXZ952qaCrpjxtPlj79bhtPcsvAyZuQ9pqWdBpEt6M8fwEPYSG+sp/32DXkLp5P28XLJ3WMBEFvgV+HzUJY9T0p4WY9biIfeeV7iosUIHtcDhoflZxnjJEy8wPdgmoOd6177IJfQwSzxygiS+pt/p4cHI1i85gdig6nBl6C0ouik+5BA9Bg7yD3vLq3xbac/F9x0k2KnPxz8ryX63h7CziBhdjAuSncQrJehgSB/8SUKdQTO6C9/qGblxzSGR2aW7MMhXJP55xs1S6DVIGY7g3AqP52wivVigHRPHgie8FQZZygzxVY1K31OCEjNSkMnbra0C9XThBnB2RKouQZbidPGj/PYDGPxY0dbJ9FA62X6156BlsVGnBhPMhCEj4G+6zxPsZepZD/CIgd7Zcc9pSimt54SIYcTRVoc9LQ9lLuXNK0pknkmkfYAgpZ5n19HMUVEqGmXBGuXizDcNVez8g0mwKzkjLQrI+XOo3OFbr2Spqx0qIHDYqLI0r6EDUvWVkyb6Enk8BlrGB5NfcfmRki6ZO1Zq9az7FXVcjsGR5ytKcb0xk/RJhtO842BcLM8+0tFmZLJ1+obQL0qZheIFgXzBWG1ncDA==
		}
	}
	encode zstd gzip
	reverse_proxy 172.41.0.2:22300 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/joplin-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# etherpad.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.42.0.2:9001 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

cadvisor.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.43.0.2:8080 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/cadvisor-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

httpbun.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.46.0.2:80 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/httpbun-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

httpbin.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.46.0.3:80 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/httpbin-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

ihatemoney.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.47.0.2:8000 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/ihatemoney-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

dillinger.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	header /js/main.bundle.js {
		defer
		Cache-Control "public, max-age=3600, stale-while-revalidate=3600"
	}
	reverse_proxy 172.44.0.2:8080 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/dillinger-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

firefly.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.49.0.2:8080 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/firefly-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# olaris.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.51.0.2:8080 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

navidrome.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.17:4533 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/navidrome-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# syncthing.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.50.0.2:8384 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

# soulseek.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.51.0.2:6080 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

# kuma.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.53.0.2:3001 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# }

hedgedoc.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.57.0.2:3000 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/hedgedoc-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

grafana-loki.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.29.0.8:3100 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/loki-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

sabnzbd.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.19.0.19:6666 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/sabnzbd-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

fileservarr.erfianugrah.com {
	root * /files
	file_server {
		browse
		precompressed zstd br gzip
	}

	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	log {
		level debug
		output file /var/log/fileservarr-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

nodered.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.58.0.2:1880 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/nodered-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

coredns-prom-exporter-sg.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.23.0.2:9101 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/coredns-prom-exporter-sg-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

privatebin.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		client_auth {
			mode require_and_verify
			trusted_ca_cert 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
			trusted_leaf_cert MIIFmjCCA4ICFBNgmacpJA3FRSqVxTXOlNOft+3LMA0GCSqGSIb3DQEBCwUAMIGAMQswCQYDVQQGEwJTRzESMBAGA1UECAwJU2luZ2Fwb3JlMRIwEAYDVQQHDAlTaW5nYXBvcmUxFTATBgNVBAoMDE9yZ2FuaXphdGlvbjENMAsGA1UECwwERXJmaTEjMCEGA1UEAwwacHJpdmF0ZWJpbi5lcmZpYW51Z3JhaC5jb20wHhcNMjMxMTA1MTIyMTQ0WhcNMjUwMzE5MTIyMTQ0WjCBkTELMAkGA1UEBhMCU0cxCzAJBgNVBAgMAlNHMQswCQYDVQQHDAJTRzENMAsGA1UECgwERXJmaTENMAsGA1UECwwERXJmaTEjMCEGA1UEAwwacHJpdmF0ZWJpbi5lcmZpYW51Z3JhaC5jb20xJTAjBgkqhkiG9w0BCQEWFmVyZmkuYW51Z3JhaEBnbWFpbC5jb20wggIiMA0GCSqGSIb3DQEBAQUAA4ICDwAwggIKAoICAQDaj+T5amhzqhC/Po/DAIdPecRFGR05Gj3nbVyYwDUnVt9+XFdmrc6eleA3LqevCgpabq63XS8/sh9B05BWo1KcXtF9DYv18PPveRFEdc35O6loXAxLrlyEFj/X30dKz2WcG8h2Jk/eeCP2lCF+GFI1MdIAxK4T8UObyJvD10Lrjc1peOXHVF5k/S0K1rRdeMBSKT0kGrDxJJ+BOH8pRNBd765nCMW2xvrwEr18pDOrTdmqoA0CwclMquN9/C1GDyUfVYn+BkywIn/55dZet9sIfMGJRlJVdPIBPL4OAFNmMfstaJvnOkC1zPZf7gLK6iWodQFe8g5ZGwlSqpymBz53Gdg98PQ8vgJucltQ/NVsOedwx4AfjW9uN9LJ5q44YVri4VIL9PoBcrfnzHL9pPYD7cQDk+wGKP2boZAz3CegIOqdIegK1WWYJ6T6fgr79nOwc0Ja2MJ36VSMUb/fUyzcy92vN98NCh4AIwzaN9sfYjF9cd/FkUD5qjKPB7UKMclEy9HXHqPDQnfwQFkDxfvfIvY+sQYG5RQJ+yCnTYd62Itbu+9opId9CvM8iNJumxEEPLh0JHtZVZI/dlF2NPmARdXZMsT9o+woJjweri5dhQzRqo6dOfuJsJ1NbmnLl/qoyBcGGAygsuEICo96DK94DkAXcAG2o/I+W4LvtGjHQwIDAQABMA0GCSqGSIb3DQEBCwUAA4ICAQBDc1Pn3YxOnY+gQ0QXW9hDe9wvmwOecVkrDByz5Xf2LQuwBcgr/5Uj3+BGueRvm4inkkZRf4MshVKKAJhWsiRNa+e0IP0KaLRknW+pBIUva95EXWVQbp4MiJLq4WyOJgK8heQsjxxk/62aHHfdxS3ndMME/WOZ29N5weW5kwdJiMk1cAvBYy+B3zdP+XhF9ZJ2dLrXD2qtvldKzh/TIeWkTKOitZzyD1r/GPHpiwqJOCjV7sOFeptrnj+bdNY4hgh62LCB8BaXjODVaj/YTgSgpMqrGAkN09Pgd8AnDKzPm9aqv1/f8YMJ57ng1v3OrFaxOj0dFTbrgbB621JlP/gqmm9iv2eSMa7KAPvAgj54QoawLME41Si7CXa6nqkTZAgVpWXBUiPqaNzUvEoLPs3KzV1z+cCXA1RkgUyAmOIT2xrh+CISYP684LP3dt9FSij08tDRTObNXa8S70jNMNpwZufDXQBja61+jYToGaUPdv11bEzTcrhcgTcw6sGpbXzARK9rx0LR8V1Qb/cSfzumt7RWRF2lrAj5YJfwJmYFWOBy13aq+jCy3KQrlAsGhn/svzTpHHXbrtUNZL0RBLt18kuWclckwVOYjzFONs9BmaD4YyaHPlIHc+8gsaoIKflrTmlYc1ojEqdTyD0iZIz9QrdY/zVFHlRZMU8JTCuO0w==
		}
	}
	encode zstd gzip
	reverse_proxy 172.60.0.2:8080 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/privatebin-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

# photoprism.erfianugrah.com {
# 	tls {
# 		issuer acme {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 		issuer zerossl {
# 			dns cloudflare {$CF_API_TOKEN}
# 			propagation_delay 60s
# 			propagation_timeout -1
# 			resolvers 1.1.1.1
# 		}
# 	}
# 	encode zstd gzip
# 	reverse_proxy 172.63.0.2:2342 {
# 		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
# 		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
# 	}
# 	log {
# 		level debug
# 		output file /var/log/photoprism-access.log {
# 			roll_size 1gb
# 			roll_keep 5
# 			roll_keep_for 720h
# 		}
# 		format json {
# 			time_format wall
# 		}
# 	}
# }

immich.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy 172.64.0.2:8080 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/immich-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}

caddy-prometheus.erfianugrah.com {
	tls {
		issuer acme {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
		issuer zerossl {
			dns cloudflare {$CF_API_TOKEN}
			propagation_delay 60s
			propagation_timeout -1
			resolvers 1.1.1.1
		}
	}
	encode zstd gzip
	reverse_proxy /metrics localhost:2019 {
		trusted_proxies private_ranges {$CF_IP_V4} {$CF_IP_V6}
		header_up X-Forwarded-For {http.request.header.CF-Connecting-IP}
	}
	log {
		level debug
		output file /var/log/caddy-prometheus-access.log {
			roll_size 1gb
			roll_keep 5
			roll_keep_for 720h
		}
		format json {
			time_format wall
		}
	}
}
